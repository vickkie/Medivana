"use strict";window.Riode||(window.Riode={}),function(e){Riode.liveSearch=function(s,a){e.fn.devbridgeAutocomplete&&(a=void 0===a?e(".search-wrapper"):a).each((function(){var s=e(this),a=s.hasClass("hs-fullscreen"),r=s.find(".search-results"),i=a?r:s.find(".live-search-list"),n=s.find(".cat"),t=s.find('input[name="post_type"]').val(),c=riode_vars.ajax_url+"?action=riode_ajax_search&nonce="+riode_vars.nonce+(t?"&post_type="+t:""),l=!0,o='<div class="search-product skel-pro-search2"></div>'.repeat(21);if(a){var d=function(e,s){var a="";return a='<a href="'+e.url+'">',e.img?a+='<img class="search-image" src="'+e.img+'" width="219" height="219">':a+='<img class="search-image" src="'+riode_vars.placeholder_img+'" width="219" height="219">',a+='<div class="search-info">',a+='<div class="search-name">'+(s?e.value.replace(s,"<b>"+s+"</b>"):e.value)+"</div>",e.price&&(a+='<span class="search-price">'+e.price+"</span>"),a+="</div></a>"};s.find(".btn-search").on("click",(function(a){s.hasClass("viewall")||a.preventDefault(),riode_vars.skeleton_screen&&r.addClass("skeleton-body full-screen"),i.html(riode_vars.skeleton_screen?o:'<div class="d-loading"><i></i></div>'),s.find(".search-action .btn").css("display","none"),e.ajax({type:"GET",url:c,data:{query:s.find('input[type="search"]').val(),posts_per_page:21,cat:n.length?n.val():0},success:function(e){r.removeClass("skeleton-body"),i.html("");var a=e.suggestions,n=e.pages,t="";a.length?(a.forEach((function(e,a){t+='<div class="search-product">'+d(e,s.find('input[type="search"]').val())+"</div>"})),(s.hasClass("fs-default")||s.hasClass("fs-loadmore"))&&n>1?s.find(".search-action .btn").css("display","block").attr("current",1):s.find(".search-action .btn").css("display","none"),s.hasClass("fs-infinite")&&(1==n?i.attr("current","end"):i.attr("current",1))):(t='<div class="no-result"><p>'+riode_vars.texts.live_search_error+'</p><i class="d-icon-gift"></i></div>',s.find(".search-action .btn").css("display","none")),i.html(t),s.hasClass("fs-infinite")&&(l=!0)}})})),s.find(".search-action .btn").on("click",(function(a){var t=e(this);if(a.preventDefault(),s.hasClass("fs-default"))s.find("form").submit();else if(s.hasClass("fs-loadmore")){var l=t.attr("current"),h=t.html();t.html(wp.i18n.__("loading...")),riode_vars.skeleton_screen&&r.addClass("skeleton-body full-screen"),i.append(riode_vars.skeleton_screen?o:""),e.ajax({type:"GET",url:c,data:{query:s.find('input[type="search"]').val(),posts_per_page:21,current_page:l,cat:n.length?n.val():0},success:function(a){var n=a.suggestions,c=a.pages,o="";riode_vars.skeleton_screen?i.find(".skel-pro-search2").each((function(a){a<n.length?e(this).html(d(n[a],s.find('input[type="search"]').val())).removeClass("skel-pro-search2"):e(this).remove()})):(n.forEach((function(e,a){o+='<div class="search-product">'+d(e,s.find('input[type="search"]').val())+"</div>"})),i.append(o)),c>Number(l)+1?s.find(".search-action .loadmore").css("display","block").attr("current",Number(l)+1):s.find(".search-action .loadmore").css("display","none"),t.html(h),r.removeClass("skeleton-body")}})}})),s.hasClass("fs-infinite")&&r.parent().on("scroll",(function(a){var t=r[0].clientHeight-this.clientHeight-this.scrollTop;if(l&&t<10){var h=i.attr("current");l=!1,"end"!=h&&(riode_vars.skeleton_screen&&r.addClass("skeleton-body full-screen"),i.append(riode_vars.skeleton_screen?o:'<div class="d-loading"><i></i></div>'),e.ajax({type:"GET",url:c,data:{query:s.find('input[type="search"]').val(),posts_per_page:21,current_page:h,cat:n.length?n.val():0},success:function(a){var n=a.suggestions,t=a.pages,c="";riode_vars.skeleton_screen?i.find(".skel-pro-search2").each((function(a){a<n.length?e(this).html(d(n[a],s.find('input[type="search"]').val())).removeClass("skel-pro-search2"):e(this).remove()})):(i.find(".d-loading").remove(),n.forEach((function(e,a){c+='<div class="search-product">'+d(e,s.find('input[type="search"]').val())+"</div>"})),i.append(c)),t>Number(h)+1?i.attr("current",Number(h)+1):i.attr("current","end"),r.removeClass("skeleton-body"),l=!0}}))}}))}else if(s.find('input[type="search"]').devbridgeAutocomplete({minChars:3,appendTo:i,triggerSelectOnValidInput:!0,serviceUrl:c,onSearchStart:function(){riode_vars.skeleton_screen&&s.addClass("skeleton-body"),i.children().eq(0).html(riode_vars.skeleton_screen?'<div class="skel-pro-search"></div><div class="skel-pro-search"></div><div class="skel-pro-search"></div>':'<div class="d-loading"><i></i></div>').css({position:"relative",display:"block"})},onSelect:function(e){-1!=e.id&&(window.location.href=e.url)},onSearchComplete:function(e,a){s.removeClass("skeleton-body"),a.length||i.children().eq(0).hide()},beforeRender:function(s){e(s).removeAttr("style")},formatResult:function(s,a){var r="("+e.Autocomplete.utils.escapeRegExChars(a)+")",i="";return s.img&&(i+='<img class="search-image" src="'+s.img+'">'),i+='<div class="search-info">',i+='<div class="search-name">'+s.value.replace(new RegExp(r,"gi"),"<strong>$1</strong>")+"</div>",s.price&&(i+='<span class="search-price">'+s.price+"</span>"),i+="</div>"}}),n.length){var h=s.find('input[type="search"]').devbridgeAutocomplete();n.on("change",(function(e){n.val()&&"0"!=n.val()?h.setOptions({serviceUrl:c+"&cat="+n.val()}):h.setOptions({serviceUrl:c}),h.hide(),h.onValueChange()}))}}))},e(window).on("riode_complete",Riode.liveSearch)}(jQuery);